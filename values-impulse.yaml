# Default values for impulse
# This is a YAML-formatted file.

# Should not be changed until IMPulse supports multiple replicas
# replicaCount: 1

image:
  repository: ghcr.io/eslupmi/impulse
  pullPolicy: IfNotPresent
  tag: ""  # If empty, will use .Chart.AppVersion

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# Custom labels to add to all resources
labels: {}
  # environment: production
  # team: platform
  # cost-center: infra

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  type: ClusterIP
  port: 5000

ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: impulse.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: impulse-tls
  #    hosts:
  #      - impulse.local
  
  # HTTP prefix configuration for reverse proxy deployments
  httpPrefix: ""  # "/impulse" for example

resources:
  limits:
    memory: 256Mi
  requests: 
    cpu: 100m
    memory: 128Mi

# Should not be changed until Impulse supports multiple replicas
# autoscaling:
#   enabled: false
#   minReplicas: 1
#   maxReplicas: 100
#   targetCPUUtilizationPercentage: 80
#   targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

# Persistence configuration
persistence:
  enabled: true
  storageClass: ""
  accessMode: ReadWriteOnce
  size: 1Gi
  name: ""  # Custom PVC name (if empty, uses default naming)

# Configuration for Impulse
config:
  # Environment variables
  env:
    # Data and config paths
    DATA_PATH: "/data"
    CONFIG_PATH: "/config"
    LOG_LEVEL: "INFO"
    
    # Chain provider settings
    CHAIN_PROVIDER_SYNC_INTERVAL_SECONDS: "60"
    CHAIN_PROVIDER_MAX_EVENTS: "10"
    CHAIN_PROVIDER_DAYS_TO_SYNC: "7"
    
    # CORS settings
    CORS_ALLOWED_ORIGINS: "http://localhost:5000"
    
    # HTTP prefix configuration
    HTTP_PREFIX: ""  # "/impulse" for example
    
    # Slack configuration (if using Slack)
    SLACK_BOT_USER_OAUTH_TOKEN: ""
    SLACK_VERIFICATION_TOKEN: ""
    
    # Mattermost configuration (if using Mattermost)
    MATTERMOST_ACCESS_TOKEN: ""
    
    # Telegram configuration (if using Telegram)
    TELEGRAM_BOT_TOKEN: ""
    
    # Google Calendar integration (if using Google chains)
    GOOGLE_SERVICE_ACCOUNT_FILE: "/config/key.json"
  


# Impulse configuration file
impulseConfig:
  # Messenger configuration
  messenger:
    type: "slack"  # slack, mattermost, telegram, none
    admin_users: []
    users: {}
    user_groups: {}
    channels: {}
    chains: {}
  
  # Incident configuration
  incident:
    notifications:
      new_firing: true
      partial_resolved: true
      status_update: true
    timeouts:
      firing: "6h"
      unknown: "6h"
      resolved: "12h"
  
  # Webhooks configuration
  webhooks: {}
  
  # Route configuration
  route:
    channel: ""
    routes: []
  
  # UI configuration
  ui:
    columns: []
    sorting: []
    colors: {}
  
  # Experimental features
  experimental: {}

# Templates for customizing messages
templates:
  header: ""  # Custom header template content
  body: ""    # Custom body template content
  status_icons: ""  # Custom status icons template content

# Secret management
secrets:
  # Option 1: Reference existing secrets (recommended for production)
  # Uncomment and configure when using existing secrets
  # existing:
  #   slack:
  #     secretName: "my-slack-secrets"  # Name of existing secret containing both tokens
  #     botUserOauthTokenKey: "slack-bot-user-oauth-token"
  #     verificationTokenKey: "slack-verification-token"
  #   mattermost:
  #     secretName: "my-mattermost-secrets"  # Name of existing secret
  #     accessTokenKey: "mattermost-access-token"
  #   telegram:
  #     secretName: "my-telegram-secrets"  # Name of existing secret
  #     botTokenKey: "telegram-bot-token"
  #   google:
  #     secretName: "my-google-secrets"  # Name of existing secret
  #     serviceAccountKeyKey: "google-service-account-key"
  
  # Option 2: Inline secrets (for development/testing)
  # Leave empty if using existing secrets above
  inline:
    slack:
      botUserOauthToken: ""  
      verificationToken: "" 
    mattermost:
      accessToken: ""
    telegram:
      botToken: ""
    google:
      serviceAccountKey: ""

# Additional volumes and mounts
volumes: []
volumeMounts: []

# Pod disruption budget
podDisruptionBudget:
  enabled: false
  minAvailable: 1
  # maxUnavailable: 1

# Network policy
networkPolicy:
  enabled: false
  ingressRules: []
  egressRules: []
